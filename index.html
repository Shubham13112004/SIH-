<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rainwater Harvesting Assessment Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Leaflet CSS for map styling -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <!-- Leaflet.draw CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>

    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-water me-2"></i>Rainwater Harvesting Tool
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#assessment">Assessment</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#results">Results</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#savings-calculator">Savings Calculator</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section" id="home">
        <div class="container text-center">
            <h1 class="display-4 fw-bold mb-4">Assess Your Rainwater Harvesting Potential</h1>
            <p class="lead mb-4">A comprehensive tool to evaluate rooftop rainwater harvesting and artificial recharge potential for your location</p>
            <a href="#assessment" class="btn btn-light btn-lg px-4">Get Started <i class="fas fa-arrow-right ms-2"></i></a>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-5">
        <div class="container">
            <h2 class="text-center section-title">Key Features</h2>
            <div class="row">
                <div class="col-md-4">
                    <div class="card text-center h-100">
                        <div class="card-body">
                            <div class="feature-icon">
                                <i class="fas fa-map-marked-alt"></i>
                            </div>
                            <h4 class="card-title">Location-Based Analysis</h4>
                            <p class="card-text">Get accurate assessments based on your geographic location and local rainfall patterns.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card text-center h-100">
                        <div class="card-body">
                            <div class="feature-icon">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <h4 class="card-title">Potential Calculation</h4>
                            <p class="card-text">Calculate rainwater harvesting potential based on roof area, rainfall data, and other factors.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card text-center h-100">
                        <div class="card-body">
                            <div class="feature-icon">
                                <i class="fas fa-tools"></i>
                            </div>
                            <h4 class="card-title">Structure Recommendations</h4>
                            <p class="card-text">Receive customized recommendations for recharge structures based on your specific situation.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Assessment Form -->
    <section class="py-5 bg-light" id="assessment">
        <div class="container">
            <h2 class="text-center section-title">Rainwater Harvesting Assessment</h2>
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card">
                        <div class="card-header bg-white">
                            <ul class="nav nav-tabs card-header-tabs" id="assessmentTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="basic-tab" data-bs-toggle="tab" data-bs-target="#basic">Basic Info & Map</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="roof-tab" data-bs-toggle="tab" data-bs-target="#roof">Roof Details</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="site-tab" data-bs-toggle="tab" data-bs-target="#site">Site Conditions</button>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content" id="assessmentTabsContent">
                                <!-- Basic Info Tab -->
                                <div class="tab-pane fade show active" id="basic">
                                    <div class="mb-3">
                                        <label class="form-label">Full Name</label>
                                        <input type="text" class="form-control" id="userName" placeholder="Enter your name">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Location</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="userLocation" placeholder="Enter your location">
                                            <button class="btn btn-outline-secondary" type="button" id="getLocationBtn">
                                                <i class="fas fa-map-marker-alt"></i> Use My Location & Draw Roof
                                            </button>
                                        </div>
                                        <div class="form-text">Click the button to find your location and enable drawing your roof area on the map.</div>
                                    </div>
                                    
                                    <!-- Map Container Div -->
                                    <div id="map" style="height: 400px; margin-top: 15px; display: none; border-radius: 8px;"></div>
                                    
                                    <!-- Area Display Element -->
                                    <div id="area-display" class="form-text mt-2" style="display: none; font-size: 1.1em;">
                                        Last Drawn Area: <strong id="calculated-area" class="text-success">0</strong> sq. meters
                                    </div>
                                    
                                    <div class="mb-3 mt-3">
                                        <label class="form-label">Number of Dwellers</label>
                                        <input type="number" class="form-control" id="dwellersCount" placeholder="Enter number of people">
                                    </div>
                                    <div class="text-end">
                                        <button class="btn btn-primary" id="nextToRoofBtn">Next <i class="fas fa-arrow-right ms-1"></i></button>
                                    </div>
                                </div>
                                
                                <!-- Roof Details Tab -->
                                <div class="tab-pane fade" id="roof">
                                    <div class="mb-3">
                                        <label class="form-label">Roof Type</label>
                                        <select class="form-select" id="roofType">
                                            <option value="" selected>Select roof type</option>
                                            <option value="concrete">Concrete</option>
                                            <option value="metal">Metal</option>
                                            <option value="tiled">Tiled</option>
                                            <option value="thatched">Thatched</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Roof Area (sq. meters)</label>
                                        <input type="number" class="form-control" id="roofArea" placeholder="Enter roof area or draw on map">
                                        <div class="form-text">This field is auto-filled when you draw on the map in the 'Basic Info' tab.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Average Annual Rainfall (mm)</label>
                                        <input type="number" class="form-control" id="annualRainfall" value="1200">
                                        <div class="form-text">Based on your location, this is the estimated annual rainfall</div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-outline-secondary" id="prevToBasicBtn">
                                            <i class="fas fa-arrow-left me-1"></i> Previous
                                        </button>
                                        <button class="btn btn-primary" id="nextToSiteBtn">
                                            Next <i class="fas fa-arrow-right ms-1"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Site Conditions Tab -->
                                <div class="tab-pane fade" id="site">
                                    <!-- EDIT: Modified the open space input to include a draw button -->
                                    <div class="mb-3">
                                        <label class="form-label">Available Open Space (sq. meters)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="openSpace" placeholder="Enter available space">
                                            <button class="btn btn-outline-secondary" type="button" id="drawOpenSpaceBtn">
                                                <i class="fas fa-drafting-compass"></i> Draw on Map
                                            </button>
                                        </div>
                                         <div class="form-text">Enter manually or click "Draw on Map" and use the tools in the first tab.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Soil Type</label>
                                        <select class="form-select" id="soilType">
                                            <option value="" selected>Select soil type</option>
                                            <option value="sandy">Sandy</option>
                                            <option value="clay">Clay</option>
                                            <option value="loamy">Loamy</option>
                                            <option value="rocky">Rocky</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Depth to Water Table (meters)</label>
                                        <input type="number" class="form-control" id="waterTableDepth" placeholder="Enter depth if known">
                                        <div class="form-text">Leave blank if unknown - we'll use regional averages</div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-outline-secondary" id="prevToRoofBtn">
                                            <i class="fas fa-arrow-left me-1"></i> Previous
                                        </button>
                                        <button class="btn btn-success" id="calculatePotentialBtn">
                                            <i class="fas fa-calculator me-1"></i> Calculate Potential
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <section class="py-5" id="results" style="display: none;">
        <div class="container">
            <h2 class="text-center section-title">Assessment Results</h2>
            
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">Summary for <span id="resultUserName"></span></h4>
                            <div class="progress mb-3">
                                <div class="progress-bar" id="feasibilityProgress" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                            </div>
                            <p class="card-text" id="feasibilityText">Feasibility assessment will appear here</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h4>Harvesting Potential</h4>
                        </div>
                        <div class="card-body">
                            <div class="result-box">
                                <h5>Annual Harvestable Rainwater</h5>
                                <h3 class="text-primary" id="harvestableWater">0 <small>Liters</small></h3>
                                <p>Based on your roof area and local rainfall patterns</p>
                            </div>
                            
                            <div class="result-box">
                                <h5>Recommended Recharge Structure</h5>
                                <h4 id="recommendedStructure">-</h4>
                                <p id="structureDescription">Ideal for your soil type and available space</p>
                            </div>
                            
                            <div class="result-box">
                                <h5>Estimated Cost</h5>
                                <h3 class="text-primary" id="estimatedCost">₹0</h3>
                                <p id="costBreakdown">Including materials and installation</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h4>Visualization</h4>
                        </div>
                        <div class="card-body">
                            <canvas id="rainwaterChart" height="250"></canvas>
                        </div>
                    </div>
                    
                    <div class="card mt-4">
                        <div class="card-header bg-white">
                            <h4>Recommended Structure Details</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-sm-6">
                                    <h6 id="structureType">Recharge Pit</h6>
                                    <ul class="list-unstyled" id="structureDimensions">
                                        <li><strong>Dimensions:</strong> -</li>
                                        <li><strong>Filter Media:</strong> -</li>
                                    </ul>
                                </div>
                                <div class="col-sm-6">
                                    <h6>Benefits</h6>
                                    <ul class="list-unstyled" id="structureBenefits">
                                        <li><i class="fas fa-check text-success me-2"></i> Groundwater recharge</li>
                                        <li><i class="fas fa-check text-success me-2"></i> Reduces water bills</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <button class="btn btn-outline-primary" id="downloadReportBtn">
                                    <i class="fas fa-download me-1"></i> Download Detailed Report
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card cost-analysis">
                        <div class="card-header bg-white">
                            <h4>Cost-Benefit Analysis</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Initial Investment</h5>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Materials
                                            <span id="costMaterials">₹0</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Labor
                                            <span id="costLabor">₹0</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Miscellaneous
                                            <span id="costMisc">₹0</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <strong>Total</strong>
                                            <strong id="costTotal">₹0</strong>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h5>Annual Savings</h5>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Water bill reduction
                                            <span id="savingsWater">₹0</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Reduced tanker costs
                                            <span id="savingsTanker">₹0</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <strong>Payback Period</strong>
                                            <strong id="paybackPeriod">-</strong>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Water Savings Calculator -->
    <section class="py-5 bg-light" id="savings-calculator">
        <div class="container">
            <h2 class="text-center section-title">Water Savings Calculator</h2>
            <p class="text-center mb-4">See how much water and money you can save over time with rainwater harvesting</p>
            
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Current Monthly Water Bill (₹)</label>
                                        <input type="number" class="form-control" id="currentWaterBill" value="2000">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Expected Utilization Rate (%)</label>
                                        <input type="number" class="form-control" id="utilizationRate" value="70" min="0" max="100">
                                        <div class="form-text">Percentage of harvested water you'll actually use</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mb-4">
                                <button class="btn btn-primary" id="calculateSavingsBtn">
                                    <i class="fas fa-calculator me-1"></i> Calculate Long-Term Savings
                                </button>
                            </div>
                            
                            <div id="savingsResults" style="display: none;">
                                <div class="result-box mb-4">
                                    <h4 class="text-center">Projected Savings Over Time</h4>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card text-center mb-3">
                                            <div class="card-body">
                                                <h5>5 Years</h5>
                                                <h3 class="text-primary" id="savings5Years">₹0</h3>
                                                <p class="mb-0">Cumulative savings</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card text-center mb-3">
                                            <div class="card-body">
                                                <h5>10 Years</h5>
                                                <h3 class="text-primary" id="savings10Years">₹0</h3>
                                                <p class="mb-0">Cumulative savings</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <canvas id="savingsChart" height="250"></canvas>
                                </div>
                                
                                <div class="mt-4 text-center">
                                    <button class="btn btn-outline-success" id="shareResultsBtn">
                                        <i class="fas fa-share-alt me-1"></i> Share These Results
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="py-5" id="about">
        <div class="container">
            <h2 class="text-center section-title">About This Tool</h2>
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <p class="lead text-center">This application is designed to promote public participation in groundwater conservation by enabling easy assessment of rainwater harvesting potential.</p>
                    
                    <div class="accordion mt-5" id="aboutAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                                    How It Works
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse show">
                                <div class="accordion-body">
                                    The tool uses scientific algorithms based on CGWB manuals to calculate rainwater harvesting potential. By analyzing your location, roof area, rainfall data, and soil conditions, it provides personalized recommendations for suitable RTRWH structures.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                                    Data Sources
                                </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse collapse">
                                <div class="accordion-body">
                                    Our calculations are based on data from the Central Ground Water Board (CGWB), Indian Meteorological Department (IMD), and scientific manuals on rooftop rainwater harvesting and artificial recharge.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                                    Benefits of Rainwater Harvesting
                                </button>
                            </h2>
                            <div id="collapseThree" class="accordion-collapse collapse">
                                <div class="accordion-body">
                                    Rainwater harvesting helps in conserving water, reducing water bills, preventing soil erosion, and most importantly, recharging groundwater aquifers. It's an effective solution for water conservation in both urban and rural areas.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Rainwater Harvesting Assessment Tool</h5>
                    <p>Empowering communities to conserve water through technology</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p>Developed based on CGWB guidelines</p>
                    <p>© 2025 All rights reserved</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Language Selector -->
    <div class="language-selector">
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                <i class="fas fa-language me-1"></i> English
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Hindi</a></li>
                <li><a class="dropdown-item" href="#">Marathi</a></li>
                <li><a class="dropdown-item" href="#">Tamil</a></li>
                <li><a class="dropdown-item" href="#">Telugu</a></li>
                <li><a class="dropdown-item" href="#">Bengali</a></li>
            </ul>
        </div>
    </div>

    <!-- Leaflet JavaScript library -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- Leaflet.draw JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>

